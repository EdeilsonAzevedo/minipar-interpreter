+----------------+     +----------------+     +----------------+     +----------------+
|     Token      |     |     Lexer      |     |    Parser      |     |  SemanticAnal  |
+----------------+     +----------------+     +----------------+     +----------------+
| -tag: str      |     | -data: str     |     | -lexer         |<-+  | -context_stack |
| -value: str    |     | -line: int     |     | -lookahead     |  |  | -function_table|
+----------------+     | -token_table   |     | -lineno        |  |  +----------------+
                       +----------------+     | -symtable      |  |  | +visit()       |
                       | +scan()        +---->+----------------+  |  | +analyze_*()   |
                       +----------------+     | +match()       |  |  +--------+-------+
                                              | +start()       +--+           |
                                              | +stmt()        |              |
                                              | +expr()        |              |
                                              +-------+--------+              |
                                                      |                       |
                                                      |                       |
                                                      v                       v
+----------------+     +----------------+     +----------------+     +----------------+
|    SymTable    |     |     Symbol     |     |      AST       |     |    Executor    |
+----------------+     +----------------+     +----------------+     +----------------+
| -table: dict   |     | -var: str      |     | +Node          |<----| -var_table     |
| -prev          |<-+  | -type: str     |     | +Statement     |     | -function_table|
+----------------+  |  +----------------+     | +Expression    |     | -connection_tbl|
| +insert()      |  |                         | +Module        |     +----------------+
| +find()        |  |                         | +Assign        |     | +run()         |
+----------------+  |  +----------------+     | +FuncDef       |     | +execute()     |
                    |  |    VarTable    |     | +If/While      |     | +exec_*()      |
                    |  +----------------+     | +Par/Seq       |     +----------------+
                    |  | -table: dict   |     | +Channel       |
                    +->| -prev          |     +----------------+
                       +----------------+
                       | +find()        |
                       +----------------+